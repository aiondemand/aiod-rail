<mat-sidenav-container class="container" [autosize]="true" [class.only-sidebar]="hideContent()">
  <mat-sidenav
    class="sidebar"
    [class.collapsed]="collapsed()"
    #drawer="matSidenav"
    [mode]="mode()"
    [opened]="opened()"
    [style.width.px]="collapsed() ? 84 : 280"
    role="navigation"
    aria-label="Section navigation"
  >
    <div class="sn-inner">
      <div class="sn-scroll">
        <!-- HOME -->
        <button
          type="button"
          class="sn-section home"
          (click)="$event.preventDefault(); go('/')"
          role="link"
          aria-label="Home"
        >
          <div class="left">
            <mat-icon class="material-symbols-rounded sec-icon">home</mat-icon>
            <span class="sec-title">Home</span>
          </div>
        </button>

        <mat-divider class="sn-section-sep"></mat-divider>

        @for (sec of sections(); track sec; let i = $index) { @if (sec.title) {
        <button
          type="button"
          class="sn-section"
          [class.collapsible]="isCollapsible(sec)"
          [class.expanded]="isExpanded(i, sec)"
          (click)="onSectionHeaderClick(i, sec)"
          [attr.aria-controls]="'sec-' + i"
          [attr.aria-expanded]="isExpanded(i, sec)"
        >
          <div class="left">
            @if (sec.icon) {
            <mat-icon class="material-symbols-rounded sec-icon">{{ sec.icon }}</mat-icon>
            }
            <span class="sec-title">{{ sec.title }}</span>
          </div>
          @if (isCollapsible(sec)) {
          <mat-icon class="material-symbols-rounded chevron">expand_more</mat-icon>
          }
        </button>
        } @if (hasItems(sec)) {
        <div class="sn-panel" [class.open]="isExpanded(i, sec)" [id]="'sec-' + i">
          <mat-nav-list class="sn-list" role="list">
            @for (it of sec.items; track it) { @if (isExternalUrl(it.slug)) {
            <a mat-list-item class="sn-item" [href]="it.slug" target="_blank" rel="noopener">
              @if (it.icon) {
              <mat-icon matListIcon class="material-symbols-rounded sn-icon">{{
                it.icon
              }}</mat-icon>
              }
              <span matLine class="sn-label">{{ it.label }}</span>
            </a>
            } @else {
            <a
              mat-list-item
              class="sn-item"
              [routerLink]="linkTo(it.slug)"
              routerLinkActive="active"
              (click)="onItemClick(i)"
            >
              @if (it.icon) {
              <mat-icon matListIcon class="material-symbols-rounded sn-icon">{{
                it.icon
              }}</mat-icon>
              }
              <span matLine class="sn-label">{{ it.label }}</span>
            </a>
            } @if (it.dividerAfter) { <mat-divider class="sn-inner-divider" /> } }
          </mat-nav-list>
        </div>
        } }

        <div class="sn-gap"></div>
      </div>

      <!-- collapse -->
      <div class="sn-bottom">
        <button
          mat-icon-button
          type="button"
          class="collapse-btn"
          (click)="toggleCollapsed()"
          aria-label="Toggle sidebar"
        >
          <mat-icon class="material-symbols-rounded">
            {{ collapsed() ? 'chevron_right' : 'chevron_left' }}
          </mat-icon>
        </button>
      </div>
    </div>
  </mat-sidenav>

  <mat-sidenav-content class="content" [class.content-hidden]="hideContent()">
    <router-outlet></router-outlet>
  </mat-sidenav-content>
</mat-sidenav-container>

<!-- FEEDBACK BUTTON -->
<a
  class="aiod-feedback-button"
  href="https://aiod.eu/feedback/"
  target="_blank"
  rel="noopener noreferrer"
  aria-label="Give us your feedback"
>
  <mat-icon class="aiod-feedback-icon material-symbols-rounded">star_border</mat-icon>
  <span class="aiod-feedback-text">Give us your feedback</span>
</a>
