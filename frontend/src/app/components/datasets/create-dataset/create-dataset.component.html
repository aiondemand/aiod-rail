<h1>Create dataset</h1>

<form class="create-dataset-form" [formGroup]="datasetForm" (ngSubmit)="onSubmit()">
    <div class="form-error-message" *ngIf="error">
        {{error}}
    </div>

    <div class="basic-information">
        <h2>Basic information</h2>
        <mat-form-field>
            <mat-label>Name</mat-label>
            <input matInput placeholder="Name" formControlName="name">
            <mat-error *ngIf="datasetForm.controls['name'].hasError('nameValidation')">
                Huggingface dataset name can only contain alphanumerics, "_", "-" and "."
            </mat-error>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Description</mat-label>
            <textarea [rows]="10" matInput placeholder="Description" formControlName="description"></textarea>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Version</mat-label>
            <input matInput placeholder="Version" formControlName="version">
        </mat-form-field>

        <mat-form-field>
            <mat-label>Alternate names (Separate by comma)</mat-label>
            <input matInput placeholder="Alternate names" formControlName="alternateNames">
        </mat-form-field>

        <mat-form-field>
            <mat-label>Keywords (separate by comma)</mat-label>
            <input matInput placeholder="Keywords" formControlName="keywords">
            <mat-error *ngIf="datasetForm.controls['keywords'].hasError('keywordsValidation')">
                Huggingface keywords must start with a letter.
            </mat-error>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Platform</mat-label>
            <mat-select [value]="'huggingface'" id="dataset-platform" formControlName="platform">
                <mat-option *ngFor="let platform of (platforms$ | async)" [value]="platform.name">
                    {{ platform | formatPlatformName }}
                    <span *ngIf="!isPlatformSupported(platform)" class="coming-soon"> [Coming soon]</span>
                </mat-option>
            </mat-select>
        </mat-form-field>
    </div>

    <div class="platform-specific-inputs" *ngIf="platformValue">
        <div *ngIf="platformValue == 'huggingface'">
            <app-huggingface-form [formGroup]="huggingfaceFormGroup"></app-huggingface-form>
        </div>
        <div *ngIf="platformValue == 'aiod'">
            <!-- Nothing specific for AIoD datasets -->
        </div>
        <div *ngIf="!isPlatformSupported(platformValue)">
            <h2>
                {{platformValue | formatPlatformName}} datasets cannot be created now.<br />
                We will add this feature soon, stay tuned!
            </h2>
        </div>
    </div>

    <button mat-raised-button color="primary" type="submit" [disabled]="!datasetForm.valid || submitButtonDisabled">
        Submit
    </button>
</form>